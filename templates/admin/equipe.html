{% extends "admin/base.html" %}

{% block title %}Gerenciar P√°gina "Equipe" - {{ config.nome_site }}{% endblock %}

{% block page_title %}Gerenciar P√°gina "Equipe"{% endblock %}

{% block content %}
<div class="form-container">
    <div class="form-header">
        <h1>Gerenciar P√°gina "Equipe"</h1>
        <a href="{{ url_for('equipe') }}" target="_blank" class="btn btn-secondary">
            üëÅÔ∏è Ver P√°gina
        </a>
    </div>

    <form method="POST" class="admin-form">
        <div class="config-section">
            <h2>Informa√ß√µes Principais</h2>
            
            <div class="form-group">
                <label for="titulo">T√≠tulo Principal *</label>
                <input type="text" id="titulo" name="titulo" value="{{ pagina_equipe.titulo if pagina_equipe else '' }}" required>
            </div>

            <div class="form-group">
                <label for="subtitulo">Subt√≠tulo</label>
                <input type="text" id="subtitulo" name="subtitulo" value="{{ pagina_equipe.subtitulo if pagina_equipe else '' }}" 
                       placeholder="Uma breve descri√ß√£o da equipe">
            </div>

            <div class="form-group">
                <label for="descricao">Descri√ß√£o Geral</label>
                <textarea id="descricao" name="descricao" rows="4" placeholder="Descreva a equipe de forma geral...">{{ pagina_equipe.descricao if pagina_equipe else '' }}</textarea>
            </div>

            <div class="form-group">
                <label for="mensagem_equipe">Mensagem da Equipe</label>
                <textarea id="mensagem_equipe" name="mensagem_equipe" rows="4" placeholder="Uma mensagem especial da equipe...">{{ pagina_equipe.mensagem_equipe if pagina_equipe else '' }}</textarea>
            </div>

            <div class="form-group">
                <label for="imagem_principal">URL da Imagem Principal</label>
                <input type="url" id="imagem_principal" name="imagem_principal" value="{{ pagina_equipe.imagem_principal if pagina_equipe else '' }}" 
                       placeholder="https://exemplo.com/imagem-equipe.jpg">
                <small>Imagem de destaque da p√°gina (recomendado: 1200x600px)</small>
            </div>
        </div>

        <div class="config-section">
            <h2>Estat√≠sticas da Equipe</h2>
            <p>Adicione at√© 4 estat√≠sticas sobre a equipe (ex: total de membros, anos de experi√™ncia, etc.)</p>
            
            {% set estatisticas_equipe = {} %}
            {% if pagina_equipe and pagina_equipe.estatisticas_equipe %}
                {% set estatisticas_equipe = pagina_equipe.estatisticas_equipe | from_json %}
            {% endif %}
            
            {% for i in range(1, 5) %}
            <div class="estatistica-item">
                <h3>Estat√≠stica {{ i }}</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="estatistica_equipe_{{ i }}_titulo">T√≠tulo</label>
                        <input type="text" id="estatistica_equipe_{{ i }}_titulo" name="estatistica_equipe_{{ i }}_titulo" 
                               value="{{ estatisticas_equipe.get('estatistica_equipe_' + i|string, {}).get('titulo', '') }}" 
                               placeholder="Ex: Membros da Equipe">
                    </div>
                    <div class="form-group">
                        <label for="estatistica_equipe_{{ i }}_valor">Valor</label>
                        <input type="text" id="estatistica_equipe_{{ i }}_valor" name="estatistica_equipe_{{ i }}_valor" 
                               value="{{ estatisticas_equipe.get('estatistica_equipe_' + i|string, {}).get('valor', '') }}" 
                               placeholder="Ex: 15">
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="config-section">
            <h2>√Åreas de Atua√ß√£o</h2>
            <p>Adicione at√© 6 √°reas de atua√ß√£o da equipe (ex: locu√ß√£o, produ√ß√£o, t√©cnica, etc.)</p>
            
            {% set areas_atuacao = {} %}
            {% if pagina_equipe and pagina_equipe.areas_atuacao %}
                {% set areas_atuacao = pagina_equipe.areas_atuacao | from_json %}
            {% endif %}
            
            {% for i in range(1, 7) %}
            <div class="area-item">
                <h3>√Årea {{ i }}</h3>
                <div class="form-group">
                    <label for="area_{{ i }}_titulo">T√≠tulo da √Årea</label>
                    <input type="text" id="area_{{ i }}_titulo" name="area_{{ i }}_titulo" 
                           value="{{ areas_atuacao.get('area_' + i|string, {}).get('titulo', '') }}" 
                           placeholder="Ex: Locu√ß√£o">
                </div>
                <div class="form-group">
                    <label for="area_{{ i }}_descricao">Descri√ß√£o da √Årea</label>
                    <textarea id="area_{{ i }}_descricao" name="area_{{ i }}_descricao" rows="3" 
                              placeholder="Descreva as responsabilidades desta √°rea...">{{ areas_atuacao.get('area_' + i|string, {}).get('descricao', '') }}</textarea>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="config-section">
            <h2>Convite para a Equipe</h2>
            
            <div class="form-group">
                <label for="convite_equipe">Mensagem de Convite</label>
                <textarea id="convite_equipe" name="convite_equipe" rows="4" placeholder="Mensagem convidando pessoas para fazer parte da equipe...">{{ pagina_equipe.convite_equipe if pagina_equipe else '' }}</textarea>
                <small>Mensagem para incentivar pessoas a se juntarem √† equipe</small>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Salvar Altera√ß√µes</button>
            <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Preview da imagem principal
    const imagemPrincipal = document.getElementById('imagem_principal');
    
    function criarPreview(input) {
        const previewContainer = document.createElement('div');
        previewContainer.className = 'imagem-principal-preview';
        previewContainer.style.display = 'none';
        input.parentNode.appendChild(previewContainer);
        
        function atualizarPreview() {
            const url = input.value.trim();
            if (url) {
                previewContainer.innerHTML = `<img src="${url}" alt="Preview" style="max-width: 100%; max-height: 200px; border-radius: 8px;" onerror="this.style.display='none'">`;
                previewContainer.style.display = 'block';
            } else {
                previewContainer.style.display = 'none';
            }
        }
        
        input.addEventListener('input', atualizarPreview);
        input.addEventListener('blur', atualizarPreview);
        
        if (input.value) {
            atualizarPreview();
        }
    }
    
    criarPreview(imagemPrincipal);
});
</script>
{% endblock %} 