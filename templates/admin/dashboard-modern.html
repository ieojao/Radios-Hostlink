{% extends "admin/base-modern.html" %}

{% block title %}Dashboard - {{ config.nome_site }}{% endblock %}

{% block page_title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard">
    <div class="dashboard-header">
        <h1>Dashboard</h1>
        <p>Bem-vindo ao painel administrativo da {{ config.nome_site }}</p>
    </div>
    
    <!-- Cards de Estatísticas Modernos -->
    <div class="stats-cards">
        <div class="stat-card">
            <div class="stat-icon">
                <i data-feather="radio"></i>
            </div>
            <div class="stat-content">
                <h3>{{ total_programacao }}</h3>
                <p>Programas</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">
                <i data-feather="users"></i>
            </div>
            <div class="stat-content">
                <h3>{{ total_locutores }}</h3>
                <p>Locutores</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">
                <i data-feather="image"></i>
            </div>
            <div class="stat-content">
                <h3>{{ total_banners }}</h3>
                <p>Banners</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">
                <i data-feather="message-circle"></i>
            </div>
            <div class="stat-content">
                <h3>{{ total_mensagens }}</h3>
                <p>Mensagens</p>
                {% if mensagens_nao_lidas > 0 %}
                    <span class="unread-badge">{{ mensagens_nao_lidas }} não lidas</span>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- Ações Rápidas Modernas -->
    <div class="quick-actions">
        <h2>Ações Rápidas</h2>
        <div class="actions-grid">
            <a href="{{ url_for('admin_programacao_adicionar') }}" class="action-card">
                <div class="action-icon">
                    <i data-feather="plus"></i>
                </div>
                <h3>Adicionar Programa</h3>
                <p>Criar nova programação</p>
            </a>
            
            <a href="{{ url_for('admin_locutores_adicionar') }}" class="action-card">
                <div class="action-icon">
                    <i data-feather="user-plus"></i>
                </div>
                <h3>Adicionar Locutor</h3>
                <p>Cadastrar novo locutor</p>
            </a>
            
            <a href="{{ url_for('admin_destaques') }}" class="action-card">
                <div class="action-icon">
                    <i data-feather="star"></i>
                </div>
                <h3>Gerenciar Destaques</h3>
                <p>Editar destaques da página inicial</p>
            </a>
            
            <a href="{{ url_for('admin_configuracoes') }}" class="action-card">
                <div class="action-icon">
                    <i data-feather="settings"></i>
                </div>
                <h3>Configurações</h3>
                <p>Configurar site</p>
            </a>
            
            <a href="{{ url_for('admin_mensagens') }}" class="action-card">
                <div class="action-icon">
                    <i data-feather="mail"></i>
                </div>
                <h3>Ver Mensagens</h3>
                <p>Gerenciar mensagens de contato</p>
            </a>
            
            <a href="{{ url_for('admin_usuarios') }}" class="action-card">
                <div class="action-icon">
                    <i data-feather="user-check"></i>
                </div>
                <h3>Usuários</h3>
                <p>Gerenciar usuários do sistema</p>
            </a>
        </div>
    </div>
    
    <!-- Programação Atual -->
    <div class="current-programming">
        <h2>Programação Atual</h2>
        <div class="programming-info">
            <div class="info-grid">
                <div class="info-item">
                    <i data-feather="calendar"></i>
                    <div>
                        <strong>Dia:</strong>
                        <span id="current-day">Carregando...</span>
                    </div>
                </div>
                <div class="info-item">
                    <i data-feather="clock"></i>
                    <div>
                        <strong>Horário:</strong>
                        <span id="current-time">Carregando...</span>
                    </div>
                </div>
                <div class="info-item">
                    <i data-feather="radio"></i>
                    <div>
                        <strong>Programa:</strong>
                        <span id="current-program">Carregando...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Links Úteis -->
    <div class="useful-links">
        <h2>Links Úteis</h2>
        <div class="links-grid">
            <a href="/" class="link-card" target="_blank">
                <div class="link-icon">
                    <i data-feather="external-link"></i>
                </div>
                <div class="link-content">
                    <h3>Ver Site</h3>
                    <p>Acessar o site público</p>
                </div>
            </a>
            
            <a href="/programacao" class="link-card" target="_blank">
                <div class="link-icon">
                    <i data-feather="calendar"></i>
                </div>
                <div class="link-content">
                    <h3>Programação</h3>
                    <p>Ver página de programação</p>
                </div>
            </a>
            
            <a href="/equipe" class="link-card" target="_blank">
                <div class="link-icon">
                    <i data-feather="users"></i>
                </div>
                <div class="link-content">
                    <h3>Equipe</h3>
                    <p>Ver página da equipe</p>
                </div>
            </a>
            
            <a href="/contato" class="link-card" target="_blank">
                <div class="link-icon">
                    <i data-feather="phone"></i>
                </div>
                <div class="link-content">
                    <h3>Contato</h3>
                    <p>Ver página de contato</p>
                </div>
            </a>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Atualizar informações da programação atual
    function atualizarProgramacaoAtual() {
        fetch('/api/programacao-atual')
            .then(response => response.json())
            .then(data => {
                const hoje = new Date();
                const diasSemana = ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'];
                const diaAtual = diasSemana[hoje.getDay()];
                
                document.getElementById('current-day').textContent = diaAtual;
                document.getElementById('current-time').textContent = hoje.toLocaleTimeString('pt-BR', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                if (data.error) {
                    document.getElementById('current-program').textContent = 'Sem programação';
                } else {
                    document.getElementById('current-program').textContent = data.titulo;
                }
            })
            .catch(error => {
                console.error('Erro ao buscar programação:', error);
                document.getElementById('current-program').textContent = 'Erro ao carregar';
            });
    }
    
    // Atualizar a cada 30 segundos
    atualizarProgramacaoAtual();
    setInterval(atualizarProgramacaoAtual, 30000);
    
    // Atualizar timer
    function atualizarTimer() {
        const timer = document.getElementById('timer');
        if (timer) {
            const agora = new Date();
            const minutos = agora.getMinutes().toString().padStart(2, '0');
            const segundos = agora.getSeconds().toString().padStart(2, '0');
            timer.textContent = `${minutos}:${segundos}`;
        }
    }
    
    setInterval(atualizarTimer, 1000);
    
    // Animações de entrada
    const cards = document.querySelectorAll('.stat-card, .action-card, .link-card');
    cards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.1}s`;
        card.classList.add('fade-in');
    });
});
</script>
{% endblock %} 