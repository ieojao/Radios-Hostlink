{% extends "admin/base.html" %}

{% block title %}Dashboard - {{ config.nome_site }}{% endblock %}

{% block content %}
<div class="dashboard">
    <div class="dashboard-header">
        <h1>Dashboard</h1>
        <p>Bem-vindo ao painel administrativo da {{ config.nome_site }}</p>
    </div>
    
    <!-- Cards de estat√≠sticas -->
    <div class="stats-cards">
        <div class="stat-card">
            <div class="stat-icon">üìª</div>
            <div class="stat-content">
                <h3>{{ total_programacao }}</h3>
                <p>Programas</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üé§</div>
            <div class="stat-content">
                <h3>{{ total_locutores }}</h3>
                <p>Locutores</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üñºÔ∏è</div>
            <div class="stat-content">
                <h3>{{ total_banners }}</h3>
                <p>Banners</p>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üí¨</div>
            <div class="stat-content">
                <h3>{{ total_mensagens }}</h3>
                <p>Mensagens</p>
                {% if mensagens_nao_lidas > 0 %}
                    <small class="unread-badge">{{ mensagens_nao_lidas }} n√£o lidas</small>
                {% endif %}
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-content">
                <h3>1</h3>
                <p>Usu√°rios</p>
            </div>
        </div>
    </div>
    
    <!-- A√ß√µes r√°pidas -->
    <div class="quick-actions">
        <h2>A√ß√µes R√°pidas</h2>
        <div class="actions-grid">
            <a href="{{ url_for('admin_programacao_adicionar') }}" class="action-card">
                <div class="action-icon">‚ûï</div>
                <h3>Adicionar Programa</h3>
                <p>Criar nova programa√ß√£o</p>
            </a>
            
            <a href="{{ url_for('admin_locutores_adicionar') }}" class="action-card">
                <div class="action-icon">üë§</div>
                <h3>Gerenciar Locutores</h3>
                <p>Adicionar ou editar locutores</p>
            </a>
            
            <a href="{{ url_for('admin_destaques') }}" class="action-card">
                <div class="action-icon">‚≠ê</div>
                <h3>Gerenciar Destaques</h3>
                <p>Editar destaques da p√°gina inicial</p>
            </a>
            
            <a href="{{ url_for('admin_configuracoes') }}" class="action-card">
                <div class="action-icon">‚öôÔ∏è</div>
                <h3>Configura√ß√µes</h3>
                <p>Configurar site</p>
            </a>
            
            <a href="{{ url_for('admin_usuarios') }}" class="action-card">
                <div class="action-icon">üìä</div>
                <h3>Usu√°rios</h3>
                <p>Gerenciar usu√°rios</p>
            </a>
        </div>
    </div>
    
    <!-- Programa√ß√£o atual -->
    <div class="current-programming">
        <h2>Programa√ß√£o Atual</h2>
        <div class="programming-info">
            <p><strong>Dia:</strong> <span id="current-day">Carregando...</span></p>
            <p><strong>Hor√°rio:</strong> <span id="current-time">Carregando...</span></p>
            <p><strong>Programa:</strong> <span id="current-program">Carregando...</span></p>
        </div>
    </div>
    
    <!-- Links √∫teis -->
    <div class="useful-links">
        <h2>Links √öteis</h2>
        <div class="links-grid">
            <a href="{{ url_for('public.index') }}" target="_blank" class="link-card">
                <h3>Ver Site</h3>
                <p>Acessar o site p√∫blico</p>
            </a>
            
            <a href="#" class="link-card">
                <h3>Backup</h3>
                <p>Fazer backup do sistema</p>
            </a>
            
            <a href="#" class="link-card">
                <h3>Logs</h3>
                <p>Ver logs do sistema</p>
            </a>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Atualizar informa√ß√µes da programa√ß√£o atual
    function atualizarProgramacaoAtual() {
        fetch('/api/programacao-atual')
            .then(response => response.json())
            .then(data => {
                const currentDay = document.getElementById('current-day');
                const currentTime = document.getElementById('current-time');
                const currentProgram = document.getElementById('current-program');
                
                if (data.error) {
                    currentProgram.textContent = 'Nenhuma programa√ß√£o ativa';
                } else {
                    currentProgram.textContent = data.titulo;
                }
                
                // Atualizar dia e hora
                const agora = new Date();
                const dias = ['Domingo', 'Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta', 'S√°bado'];
                currentDay.textContent = dias[agora.getDay()];
                currentTime.textContent = agora.toLocaleTimeString('pt-BR');
            })
            .catch(error => console.error('Erro ao buscar programa√ß√£o:', error));
    }
    
    // Atualizar a cada minuto
    atualizarProgramacaoAtual();
    setInterval(atualizarProgramacaoAtual, 60000);
});
</script>
{% endblock %} 