<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Admin - {{ config.nome_site }}{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin-modern.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="icon" href="{{ config.favicon }}">
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body class="admin">
    <!-- Sidebar Moderna -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>{{ config.nome_site }}</h2>
            <p>Painel Administrativo</p>
        </div>
        
        <nav class="sidebar-nav">
            <a href="{{ url_for('admin_dashboard') }}" class="nav-item {% if request.endpoint == 'admin_dashboard' %}active{% endif %}">
                <i data-feather="bar-chart-2" class="nav-icon"></i>
                <span class="nav-text">Dashboard</span>
            </a>
            
            <a href="{{ url_for('admin_programacao') }}" class="nav-item {% if 'programacao' in request.endpoint %}active{% endif %}">
                <i data-feather="radio" class="nav-icon"></i>
                <span class="nav-text">Programação</span>
            </a>
            
            <a href="{{ url_for('admin_locutores') }}" class="nav-item {% if 'locutores' in request.endpoint %}active{% endif %}">
                <i data-feather="users" class="nav-icon"></i>
                <span class="nav-text">Locutores</span>
            </a>
            
            <a href="{{ url_for('admin_banners') }}" class="nav-item {% if 'banners' in request.endpoint %}active{% endif %}">
                <i data-feather="image" class="nav-icon"></i>
                <span class="nav-text">Banners</span>
            </a>
            
            <a href="{{ url_for('admin_destaques') }}" class="nav-item {% if 'destaques' in request.endpoint %}active{% endif %}">
                <i data-feather="star" class="nav-icon"></i>
                <span class="nav-text">Destaques</span>
            </a>
            
            <a href="{{ url_for('admin_a_radio') }}" class="nav-item {% if 'a_radio' in request.endpoint %}active{% endif %}">
                <i data-feather="radio" class="nav-icon"></i>
                <span class="nav-text">A Rádio</span>
            </a>
            
            <a href="{{ url_for('admin_equipe') }}" class="nav-item {% if 'equipe' in request.endpoint %}active{% endif %}">
                <i data-feather="users" class="nav-icon"></i>
                <span class="nav-text">Equipe</span>
            </a>
            
            <a href="{{ url_for('admin_mensagens') }}" class="nav-item {% if 'mensagens' in request.endpoint %}active{% endif %}">
                <i data-feather="message-circle" class="nav-icon"></i>
                <span class="nav-text">Mensagens</span>
                {% if mensagens_nao_lidas and mensagens_nao_lidas > 0 %}
                    <span class="badge">{{ mensagens_nao_lidas }}</span>
                {% endif %}
            </a>
            
            <a href="{{ url_for('admin_contato') }}" class="nav-item {% if 'contato' in request.endpoint %}active{% endif %}">
                <i data-feather="phone" class="nav-icon"></i>
                <span class="nav-text">Página Contato</span>
            </a>
            
            <a href="{{ url_for('admin_configuracoes') }}" class="nav-item {% if 'configuracoes' in request.endpoint %}active{% endif %}">
                <i data-feather="settings" class="nav-icon"></i>
                <span class="nav-text">Configurações</span>
            </a>
            
            <a href="{{ url_for('admin_usuarios') }}" class="nav-item {% if 'usuarios' in request.endpoint %}active{% endif %}">
                <i data-feather="user-check" class="nav-icon"></i>
                <span class="nav-text">Usuários</span>
            </a>
        </nav>
        
        <div class="sidebar-footer">
            <a href="{{ url_for('admin_logout') }}" class="nav-item">
                <i data-feather="log-out" class="nav-icon"></i>
                <span class="nav-text">Sair</span>
            </a>
        </div>
    </aside>
    
    <!-- Conteúdo Principal -->
    <main class="main-content">
        <!-- Top Bar Moderna -->
        <header class="top-bar">
            <div class="top-bar-left">
                <button class="menu-toggle" id="menu-toggle">
                    <i data-feather="menu"></i>
                </button>
                <h1>{% block page_title %}Dashboard{% endblock %}</h1>
            </div>
            
            <div class="top-bar-right">
                <div class="user-info">
                    <i data-feather="user" style="width: 16px; height: 16px;"></i>
                    <span>Olá, {{ current_user.nome }}</span>
                </div>
            </div>
        </header>
        
        <!-- Conteúdo da Página -->
        <div class="page-content">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ 'error' if category == 'error' else 'success' }} fade-in">
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            {% block content %}{% endblock %}
        </div>
    </main>

    <!-- Scripts -->
    <script>
        // Inicializar Feather Icons
        feather.replace();
        
        // Toggle do menu mobile
        document.getElementById('menu-toggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('open');
        });
        
        // Fechar menu ao clicar fora (mobile)
        document.addEventListener('click', function(e) {
            const sidebar = document.getElementById('sidebar');
            const menuToggle = document.getElementById('menu-toggle');
            
            if (window.innerWidth <= 1024 && 
                !sidebar.contains(e.target) && 
                !menuToggle.contains(e.target)) {
                sidebar.classList.remove('open');
            }
        });
        
        // Auto-hide alerts após 5 segundos
        setTimeout(function() {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(function(alert) {
                alert.style.opacity = '0';
                setTimeout(function() {
                    alert.remove();
                }, 300);
            });
        }, 5000);
        
        // Smooth scroll para links internos
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Loading states para formulários
        document.querySelectorAll('form').forEach(form => {
            form.addEventListener('submit', function() {
                const submitBtn = this.querySelector('button[type="submit"]');
                if (submitBtn) {
                    submitBtn.classList.add('loading');
                    submitBtn.disabled = true;
                }
            });
        });
        
        // Confirmação para ações destrutivas
        document.querySelectorAll('[data-confirm]').forEach(element => {
            element.addEventListener('click', function(e) {
                const message = this.getAttribute('data-confirm');
                if (!confirm(message)) {
                    e.preventDefault();
                }
            });
        });
        
        // Tooltips
        document.querySelectorAll('[data-tooltip]').forEach(element => {
            element.addEventListener('mouseenter', function() {
                const tooltip = document.createElement('div');
                tooltip.className = 'tooltip';
                tooltip.textContent = this.getAttribute('data-tooltip');
                document.body.appendChild(tooltip);
                
                const rect = this.getBoundingClientRect();
                tooltip.style.left = rect.left + (rect.width / 2) - (tooltip.offsetWidth / 2) + 'px';
                tooltip.style.top = rect.top - tooltip.offsetHeight - 10 + 'px';
            });
            
            element.addEventListener('mouseleave', function() {
                const tooltip = document.querySelector('.tooltip');
                if (tooltip) {
                    tooltip.remove();
                }
            });
        });
    </script>
    
    {% block scripts %}{% endblock %}
</body>
</html> 