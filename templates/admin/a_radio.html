{% extends "admin/base.html" %}

{% block title %}Gerenciar P√°gina "A R√°dio" - {{ config.nome_site }}{% endblock %}

{% block page_title %}Gerenciar P√°gina "A R√°dio"{% endblock %}

{% block content %}
<div class="form-container">
    <div class="form-header">
        <h1>Gerenciar P√°gina "A R√°dio"</h1>
        <a href="{{ url_for('public.a_radio') }}" target="_blank" class="btn btn-secondary">
            üëÅÔ∏è Ver P√°gina
        </a>
    </div>

    <form method="POST" class="admin-form">
        <div class="config-section">
            <h2>Informa√ß√µes Principais</h2>
            
            <div class="form-group">
                <label for="titulo">T√≠tulo Principal *</label>
                <input type="text" id="titulo" name="titulo" value="{{ pagina_radio.titulo if pagina_radio else '' }}" required>
            </div>

            <div class="form-group">
                <label for="subtitulo">Subt√≠tulo</label>
                <input type="text" id="subtitulo" name="subtitulo" value="{{ pagina_radio.subtitulo if pagina_radio else '' }}" 
                       placeholder="Uma breve descri√ß√£o da r√°dio">
            </div>

            <div class="form-group">
                <label for="descricao">Descri√ß√£o Geral</label>
                <textarea id="descricao" name="descricao" rows="4" placeholder="Descreva a r√°dio de forma geral...">{{ pagina_radio.descricao if pagina_radio else '' }}</textarea>
            </div>

            <div class="form-group">
                <label for="imagem_principal">URL da Imagem Principal</label>
                <input type="url" id="imagem_principal" name="imagem_principal" value="{{ pagina_radio.imagem_principal if pagina_radio else '' }}" 
                       placeholder="https://exemplo.com/imagem-principal.jpg">
                <small>Imagem de destaque da p√°gina (recomendado: 1200x600px)</small>
            </div>
        </div>

        <div class="config-section">
            <h2>Hist√≥ria da R√°dio</h2>
            
            <div class="form-group">
                <label for="historia">Hist√≥ria</label>
                <textarea id="historia" name="historia" rows="6" placeholder="Conte a hist√≥ria da r√°dio, quando foi fundada, principais momentos...">{{ pagina_radio.historia if pagina_radio else '' }}</textarea>
            </div>

            <div class="form-group">
                <label for="imagem_historia">URL da Imagem da Hist√≥ria</label>
                <input type="url" id="imagem_historia" name="imagem_historia" value="{{ pagina_radio.imagem_historia if pagina_radio else '' }}" 
                       placeholder="https://exemplo.com/imagem-historia.jpg">
                <small>Imagem para a se√ß√£o de hist√≥ria (opcional)</small>
            </div>
        </div>

        <div class="config-section">
            <h2>Miss√£o, Vis√£o e Valores</h2>
            
            <div class="form-group">
                <label for="missao">Miss√£o</label>
                <textarea id="missao" name="missao" rows="3" placeholder="Qual √© a miss√£o da r√°dio?">{{ pagina_radio.missao if pagina_radio else '' }}</textarea>
            </div>

            <div class="form-group">
                <label for="visao">Vis√£o</label>
                <textarea id="visao" name="visao" rows="3" placeholder="Qual √© a vis√£o da r√°dio?">{{ pagina_radio.visao if pagina_radio else '' }}</textarea>
            </div>

            <div class="form-group">
                <label for="valores">Valores</label>
                <textarea id="valores" name="valores" rows="4" placeholder="Quais s√£o os valores da r√°dio? (um por linha)">{{ pagina_radio.valores if pagina_radio else '' }}</textarea>
                <small>Digite um valor por linha</small>
            </div>
        </div>

        <div class="config-section">
            <h2>Estat√≠sticas</h2>
            <p>Adicione at√© 4 estat√≠sticas para mostrar na p√°gina (ex: anos no ar, ouvintes, programas, etc.)</p>
            
            {% set estatisticas = {} %}
            {% if pagina_radio and pagina_radio.estatisticas %}
                {% set estatisticas = pagina_radio.estatisticas | from_json %}
            {% endif %}
            
            {% for i in range(1, 5) %}
            <div class="estatistica-item">
                <h3>Estat√≠stica {{ i }}</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="estatistica_{{ i }}_titulo">T√≠tulo</label>
                        <input type="text" id="estatistica_{{ i }}_titulo" name="estatistica_{{ i }}_titulo" 
                               value="{{ estatisticas.get('estatistica_' + i|string, {}).get('titulo', '') }}" 
                               placeholder="Ex: Anos no Ar">
                    </div>
                    <div class="form-group">
                        <label for="estatistica_{{ i }}_valor">Valor</label>
                        <input type="text" id="estatistica_{{ i }}_valor" name="estatistica_{{ i }}_valor" 
                               value="{{ estatisticas.get('estatistica_' + i|string, {}).get('valor', '') }}" 
                               placeholder="Ex: 25">
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Salvar Altera√ß√µes</button>
            <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Preview das imagens
    const imagemPrincipal = document.getElementById('imagem_principal');
    const imagemHistoria = document.getElementById('imagem_historia');
    
    function criarPreview(input, tipo) {
        const previewContainer = document.createElement('div');
        previewContainer.className = `${tipo}-preview`;
        previewContainer.style.display = 'none';
        input.parentNode.appendChild(previewContainer);
        
        function atualizarPreview() {
            const url = input.value.trim();
            if (url) {
                previewContainer.innerHTML = `<img src="${url}" alt="Preview" style="max-width: 100%; max-height: 200px; border-radius: 8px;" onerror="this.style.display='none'">`;
                previewContainer.style.display = 'block';
            } else {
                previewContainer.style.display = 'none';
            }
        }
        
        input.addEventListener('input', atualizarPreview);
        input.addEventListener('blur', atualizarPreview);
        
        if (input.value) {
            atualizarPreview();
        }
    }
    
    criarPreview(imagemPrincipal, 'imagem-principal');
    criarPreview(imagemHistoria, 'imagem-historia');
});
</script>
{% endblock %} 